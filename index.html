<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚è±Ô∏è MIQAT - Management Intelligent Quality Action Timer</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#020617;
  --border:#1f2937;
  --accent:#22d3ee;
  --success:#22c55e;
  --danger:#ef4444;
  --text:#e5e7eb;
  --muted:#9ca3af;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at top,#1e293b,#020617);
  font-family:'Inter',sans-serif;
  color:var(--text);
}

.container{
  width:100%;
  max-width:520px;
  padding:24px;
  background:#020617;
  border-radius:22px;
  box-shadow:0 0 40px rgba(34,211,238,.18);
}

h1{
  font-family:'Playfair Display',serif;
  text-align:center;
  margin:0 0 10px;
}

.timer{
  text-align:center;
  font-size:52px;
  letter-spacing:3px;
}

.progress-wrapper{
  width:100%;
  height:10px;
  background:#020617;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
  margin:12px 0;
}

.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#38bdf8,#0ea5e9);
  border-radius:999px;
  transition:width .4s ease;
}

.inputs{
  display:flex;
  gap:10px;
}

input{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
  font-size:16px;
  text-align:center;
}

.buttons{
  display:flex;
  gap:10px;
  margin-top:12px;
}

button{
  flex:1;
  padding:14px;
  border-radius:16px;
  border:none;
  font-weight:600;
  cursor:pointer;
}

.start{background:linear-gradient(135deg,#22d3ee,#38bdf8);color:#020617;}
.pause{background:#1f2937;color:#fff;}
.reset{background:#7c2d12;color:#fff;}

.stop-alarm{
  display:none;
  margin-top:14px;
  width:100%;
  background:var(--danger);
  color:#fff;
}

.todo{
  margin-top:22px;
}

.todo h2{
  font-size:14px;
  color:var(--muted);
  margin-bottom:6px;
}

/* ===== TASK PROGRESS ===== */
.task-progress-wrapper{
  width:100%;
  height:8px;
  background:#020617;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
}

.task-progress-bar{
  height:100%;
  width:0%;
  border-radius:999px;
  background:linear-gradient(90deg,#38bdf8,#0ea5e9);
  transition:width .35s ease, background .45s ease;
}

.task-progress-text{
  font-size:12px;
  color:var(--muted);
  text-align:right;
  margin-top:2px;
}

.todo-input{
  display:flex;
  gap:8px;
  margin-top:10px;
}

.todo-input button{
  background:var(--accent);
  color:#020617;
}

ul{
  list-style:none;
  padding:0;
  margin-top:12px;
}

li{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  margin-bottom:10px;
}

.task-check{
  width:20px;
  height:20px;
  accent-color:var(--accent);
}

.task-name{
  flex:1;
  text-align:left;
}

.task-time{
  min-width:72px;
  font-size:13px;
  color:var(--muted);
  text-align:right;
}

li.done .task-name{
  text-decoration:line-through;
  color:var(--success);
  opacity:.75;
}

.stats{
  font-size:13px;
  color:var(--muted);
  margin-top:8px;
}

/* ===== WATERMARK ===== */
.copyright{
  position:fixed;
  bottom:6px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  color:rgba(255,255,255,.35);
  pointer-events:none;
  user-select:none;
}
</style>
</head>

<body>

<div class="container">
  <h1>‚è±Ô∏è MIQAT - Management Intelligent Quality Action Timer</h1>

  <div class="timer" id="timer">00:00:00</div>

  <div class="progress-wrapper">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="inputs">
    <input type="number" id="hour" placeholder="Jam">
    <input type="number" id="minute" placeholder="Menit">
  </div>

  <div class="buttons">
    <button class="start" onclick="startTimer()">Mulai</button>
    <button class="pause" onclick="togglePause()">Jeda</button>
    <button class="reset" onclick="resetTimer()">Reset</button>
  </div>

  <button class="stop-alarm" id="stopAlarmBtn" onclick="stopAlarm()">üîá STOP ALARM</button>

  <div class="todo">
    <h2>üìù Daftar Tugas</h2>

    <div class="task-progress-wrapper">
      <div class="task-progress-bar" id="taskProgressBar"></div>
    </div>
    <div class="task-progress-text" id="taskProgressText">0% tugas selesai</div>

    <div class="todo-input">
      <input id="taskInput" placeholder="Tambah tugas...">
      <button onclick="addTask()">Ôºã</button>
    </div>

    <ul id="taskList"></ul>

    <div class="stats">
      üèéÔ∏è Tercepat: <span id="fastest">-</span><br>
      üê¢ Terlama: <span id="slowest">-</span>
    </div>
  </div>
</div>

<p class="copyright">¬© 2025 Afhimna Dev. All Rights Reserved.</p>

<audio id="alarmSound" loop>
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3">
</audio>

<script>

const taskColors=[
  "linear-gradient(90deg,#38bdf8,#0ea5e9)",
  "linear-gradient(90deg,#22d3ee,#06b6d4)",
  "linear-gradient(90deg,#2dd4bf,#14b8a6)",
  "linear-gradient(90deg,#34d399,#10b981)",
  "linear-gradient(90deg,#22c55e,#16a34a)",
  "linear-gradient(90deg,#a3e635,#65a30d)",
  "linear-gradient(90deg,#fde047,#eab308)",
  "linear-gradient(90deg,#fbbf24,#f59e0b)",
  "linear-gradient(90deg,#fb923c,#f97316)",
  "linear-gradient(90deg,#fb7185,#e11d48)"
];

let totalSeconds=0, initialSeconds=0, interval=null;

const timer=document.getElementById("timer");
const progressBar=document.getElementById("progressBar");
const alarm=document.getElementById("alarmSound");
const stopBtn=document.getElementById("stopAlarmBtn");

const taskProgressBar=document.getElementById("taskProgressBar");
const taskProgressText=document.getElementById("taskProgressText");
const fastestEl=document.getElementById("fastest");
const slowestEl=document.getElementById("slowest");

function formatElapsed(sec){
  const m=Math.floor(sec/60);
  const s=sec%60;
  return String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
}

function updateDisplay(){
  const h=Math.floor(totalSeconds/3600);
  const m=Math.floor((totalSeconds%3600)/60);
  const s=totalSeconds%60;
  timer.textContent=
    String(h).padStart(2,"0")+":"+
    String(m).padStart(2,"0")+":"+
    String(s).padStart(2,"0");
}

function startTimer(){
  if(interval) return;

  if(totalSeconds===0){
    totalSeconds=(hour.value||0)*3600+(minute.value||0)*60;
    initialSeconds=totalSeconds;
  }
  if(totalSeconds<=0) return;

  interval=setInterval(()=>{
    totalSeconds--;
    updateDisplay();
    progressBar.style.width=((initialSeconds-totalSeconds)/initialSeconds*100)+"%";

    if(totalSeconds<=0){
      clearInterval(interval);
      interval=null;
      alarm.play();
      stopBtn.style.display="block";
    }
  },1000);
}

function togglePause(){
  if(interval){
    clearInterval(interval);
    interval=null;
  }else{
    startTimer();
  }
}

function resetTimer(){
  clearInterval(interval);
  interval=null;
  stopAlarm();
  totalSeconds=initialSeconds=0;
  progressBar.style.width="0%";
  updateDisplay();
}

function stopAlarm(){
  alarm.pause();
  alarm.currentTime=0;
  stopBtn.style.display="none";
}

function updateTaskProgress(){
  const tasks=[...document.querySelectorAll("#taskList li")];
  const done=tasks.filter(li=>li.classList.contains("done"));

  const percent=tasks.length?Math.round(done.length/tasks.length*100):0;
  taskProgressBar.style.width=percent+"%";
  taskProgressText.textContent=percent+"% tugas selesai";

  const colorIndex=Math.min(done.length,taskColors.length-1);
  taskProgressBar.style.background=taskColors[colorIndex];

  const times=done.map(li=>Number(li.dataset.time)).filter(Boolean);
  fastestEl.textContent=times.length?formatElapsed(Math.min(...times)):"-";
  slowestEl.textContent=times.length?formatElapsed(Math.max(...times)):"-";
}

function addTask(){
  const text=taskInput.value.trim();
  if(!text) return;

  const li=document.createElement("li");

  const cb=document.createElement("input");
  cb.type="checkbox";
  cb.className="task-check";

  const name=document.createElement("span");
  name.className="task-name";
  name.textContent=text;

  const time=document.createElement("span");
  time.className="task-time";
  time.textContent="--:--";

  cb.onchange=()=>{
    li.classList.toggle("done");
    if(cb.checked && initialSeconds>0){
      const elapsed=initialSeconds-totalSeconds;
      li.dataset.time=elapsed;
      time.textContent=formatElapsed(elapsed);
    }else{
      delete li.dataset.time;
      time.textContent="--:--";
    }
    updateTaskProgress();
  };

  li.append(cb,name,time);
  taskList.appendChild(li);
  taskInput.value="";
  updateTaskProgress();
}

document.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    startTimer(); 
  }

  if(e.code==="Space"){
    if(document.activeElement.tagName!=="INPUT"){
      e.preventDefault();
      togglePause();
    }
  }
});

taskInput.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    addTask();
  }
});
</script>

</body>
</html>
